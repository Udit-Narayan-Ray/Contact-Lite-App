<!DOCTYPE html>
<html lang="eng" xmlns:th="http://www.thymeleaf.org"
	th:replace="normal/normalbase::layout(~{::section})">
<head>
<meta charset="UTF-8">
<title>Home Page</title>
</head>
<body>
	<section>

		<div class="container">


			<div class="row ">

				<div class="col-md-12">
					<div class="card">

						<div class="card-body">

							<div th:if="${session.message}"
								th:classappend="${session.message.type}"
								class="alert text-center" role="alert">
								<p th:text="${session.message.content}"
									class="rounded text-dark"></p>
								<th:block th:text="${#session.removeAttribute('message')}"></th:block>

							</div>
							<h2 class="text-center">Change Password</h2>

							<form action="#" th:action="@{/user/changePass}" method="post">

								<div class="form-group">
									<input type="text" class="form-control" name="opass"
										placeholder="Enter old Password" required>

								</div>

								<div class="form-group">
									<input type="password" class="form-control" name="npass"
										placeholder="Enter New Password" required>
								</div>

								<div class="form-group">
									<input type="password" class="form-control" name="cnpass"
										placeholder="Confirm New Password" required>
								</div>

								<div class=" container text-center">
									<button type="reset" class="btn bg-warning" name="reset"
										value="Reset">Reset</button>
									<button type="submit" class="btn bg-success" name="submit"
										value="Submit">Submit</button>
								</div>

							</form>
						
							
							<span class=" container text-left">
							
							<button th:onclick="|deleteUser(${user.userId})|" class="text-white btn bg-danger mt-5">Delete Account</button>
							
							</span>
							
						</div>

					</div>
				</div>
			</div>

		</div>
		
		<script>
		
		function deleteUser(userId)
		{
		swal({
		  title: "Are you sure?",
		  text: "Account will be deleted permanently",
		  icon: "warning",
		  buttons: true,
		  dangerMode: true,
		})
		.then((willDelete) => {
		  if (willDelete) {
			  
				window.location="/cpro/user/delete_account/"+userId;
				
		  } else {
		    swal({
				title:"!! Account is Safe !!"
				});
		  }
		});

		}
		
		</script>
			
		<script>
	$(document).ready(()=>
	{
		$(".item").removeClass("active");
		$("#setting-link").addClass("active");
	});
	
	</script>

	</section>
</body>
</html>